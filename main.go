// You can edit this code!
// Click here and start typing.
package main

import (
	"bufio"
	"crypto/sha256"
	"encoding/hex"
	"errors"
	"fmt"
	"io/ioutil"
	"math"
	"math/big"
	"os"
	"strings"
	"unicode"
	"unicode/utf8"
)

var emoji = []rune(`ðŸ¦†ðŸ£ðŸ¤ðŸ¥ðŸŽŸðŸªðŸ¤–ðŸŒ¥ðŸŽ¯ðŸ¦‹ðŸŸªðŸ›·ðŸ“¸ðŸ¤¾ðŸ”žðŸŽ€ðŸ”ˆðŸª¦ðŸ¦¢âž–ðŸ¥Šâš§ðŸŒ²ðŸª—ðŸ˜šðŸŽŒðŸŒ¡ðŸðŸ‘¨ðŸŽ—ðŸŒâ›„ðŸ’¨ðŸ–•ðŸ§¨ðŸ“ðŸ¦’ðŸŽ¨ðŸ”¦ðŸ§†ðŸšŠðŸ—‘ðŸ…ðŸ›¸ðŸ¤¿ðŸ¶ðŸš‚ðŸš€ðŸ¦¨ðŸª²ðŸµðŸ¤¶ðŸŽ¥ðŸ’ŸðŸ¥·ðŸ¦ŸðŸžðŸ˜³ðŸ¥¦ðŸ“ŽðŸ•ðŸ…ðŸ‡ðŸ•šðŸ¤«ðŸ•§ðŸŒ€ðŸ˜«ðŸ¤£ðŸ•˜ðŸ¥±ðŸ ðŸ“£ðŸŒ™ðŸ’ðŸ’±ðŸŽðŸŸ¡ðŸš…ðŸðŸ”§ðŸ§ƒðŸ˜¹ðŸ…°ðŸ•¤ðŸ¥¼ðŸšðŸ«‚ðŸ¦©ðŸ–¨ðŸ˜ºðŸŒ—ðŸŒ­ðŸ“¢ðŸ–ðŸ’ŽðŸš£ðŸŒ‰ðŸ¤½ðŸ¦»ðŸ¤¦ðŸ§±ðŸŒµðŸ’¦ðŸ“³ðŸ”šâš¾ðŸ˜¡ðŸ˜»ðŸ¤ ðŸ¦â›°ðŸ••ðŸ‚ðŸ’«ðŸ“¿ðŸŒšðŸ¤ºâ°ðŸ˜°ðŸ“¬ðŸ›„ðŸ¤´âž°ðŸ°ðŸ™‹ðŸ‡ðŸ”¹ðŸ·ðŸ‘±ðŸ¦€ðŸš¬ðŸ£ðŸ’‡âš«ðŸ¥‘ðŸ’ƒðŸš°ðŸ¦¶ðŸŸðŸ˜’ðŸ“©ðŸ¹ðŸ’‹ðŸµðŸ¥£ðŸ“´â›±ðŸ’…ðŸ¤‘ðŸ¦ŽðŸ¦œðŸ¤ðŸ‘ŒðŸš§ðŸˆðŸ’—ðŸŽ‹ðŸ©°ðŸ›ŒðŸ¹ðŸ˜©ðŸºðŸðŸ—½ðŸ«€ðŸŽ…ðŸ§˜ðŸŽðŸª¥ðŸ˜¤ðŸ“˜ðŸ¥‡ðŸ›»ðŸ¤Œâ­ðŸ•ºðŸ’»â›ªðŸš¦ðŸŸ¨âŒðŸ’½ðŸ™†ðŸ’¡ðŸª’ðŸ”›ðŸ¾ðŸ¦‰ðŸ–²ðŸ’¬ðŸš¡ðŸ‘¯âš¡ðŸ§ðŸ‰ðŸŒªðŸ’ðŸŒŽðŸ¦«ðŸ’”ðŸ§­ðŸ¬ðŸ’ðŸ§¦ðŸ©ðŸ–ðŸ˜žâ¯ðŸ›¶â›“ðŸ¥³â—½âºðŸšœðŸ¥ˆðŸ¦­ðŸ‘†ðŸ¤²ðŸ©ðŸ›ºâšªðŸŒ‡ðŸ§¶ðŸ‘»ðŸª™âž—ðŸš†ðŸ¤ðŸ‘£ðŸ“ªðŸ¤³ðŸ”«ðŸŸðŸ§—ðŸª„ðŸŽðŸš®ðŸš¹ðŸŽ¾ðŸ•œðŸ‘’ðŸ”¨ðŸŒŠðŸ§ŽðŸ’²ðŸŒ¸âŒšðŸ˜ðŸ–‹â¸ðŸ£ðŸŒ¤ðŸ“–ðŸ’ðŸª“ðŸ§³ðŸª°ðŸ˜¾ðŸ‘ªðŸ‘¸ðŸ’©â™¿ðŸšðŸ¦®ðŸˆðŸ”˜ðŸš‹ðŸ”±ðŸ›¬ðŸ¦„ðŸ‘ðŸ‘˜ðŸ©¸ðŸ’ªðŸ‘¥ðŸ‘‹ðŸ›ðŸŽšðŸ°ðŸ©²ðŸ”©ðŸ”°ðŸŽªðŸ”ðŸŒ’ðŸ§“ðŸ§¯ðŸ”—ðŸ‘ŸðŸ¦ðŸŽðŸ¤¹ðŸ¥½ðŸŸ¤ðŸ¯ðŸ“‡ðŸŸ¥ðŸ›€ðŸ•—ðŸ”´ðŸª¶ðŸ”„ðŸ§¤ðŸŒ´ðŸš¨ðŸŒ‘ðŸ¥®ðŸ‘—ðŸðŸ”–ðŸ•žâ±ðŸ“®ðŸªŸðŸ˜ðŸŒðŸ•°ðŸª´ðŸ“²ðŸŒðŸ”¶ðŸ“°ðŸ´ðŸœðŸ˜ªðŸ”â›³ðŸ¦½ðŸ‚ðŸ‘«ðŸ”‰âœŠðŸ“¯ðŸ‘ˆðŸ´ðŸ“¡ðŸŽ±ðŸ½ðŸŒðŸ•¹ðŸ˜„ðŸ¥ŒðŸª†âœ‹ðŸ¤žðŸ¤§â›ðŸŽðŸš“ðŸ¥¥ðŸƒðŸš‰ðŸ˜¶ðŸ¥–ðŸ›‘ðŸš›ðŸ”‡ðŸ’¿ðŸ¿ðŸ›°ðŸŠðŸ“‹ðŸªðŸ›‚ðŸššðŸš™ðŸ­ðŸ§«ðŸ‘µðŸ†–ðŸðŸŒ½ðŸ§²â«ðŸ”³ðŸ˜”ðŸ¥’ðŸ¤·ðŸª±â¬œðŸ‘¤ðŸ§·ðŸ…¾ðŸŠðŸŽ¡ðŸ§¼ðŸ§§ðŸ§„ðŸ‰ðŸªðŸ‘šðŸ”ŽðŸ›ðŸ…ðŸŽ½ðŸ¤ðŸ†šðŸŒ¦ðŸš”ðŸ›…ðŸ˜“ðŸ¦˜ðŸ‘¢ðŸ¥ ðŸŽ ðŸª¡ðŸ‘‡ðŸ·ðŸ¤±ðŸ“•ðŸ§¥ðŸŽ°ðŸ‘‰ðŸª£ðŸ¥ŸðŸðŸ”µðŸ¥ðŸ’§ðŸ¦ ðŸ‘›ðŸ¥—ðŸŽ¿ðŸ›£ðŸ•³ðŸ§”ðŸª ðŸ†ðŸš©ðŸ’¥ðŸŽ¦ðŸšðŸ¨ðŸ’ŒðŸ§¢ðŸ™‚âœ…ðŸ“šðŸ¦ðŸ¦¬ðŸ•‘ðŸ‘–ðŸ¦¹ðŸ§‘ðŸ¦–ðŸ˜ŒðŸ¸ðŸðŸ§¿ðŸ˜¿ðŸŽ‡ðŸ¥«âœ¨ðŸ‘ðŸ§–ðŸ—ðŸŽ¼ðŸ•¡ðŸšˆðŸŸ©âš“ðŸªšâ”ðŸ¦‡ðŸ”»ðŸšƒðŸ’ ðŸŸ§ðŸ’ðŸš ðŸ˜›ðŸ—£ðŸ¦ŠðŸ±ðŸ’·ðŸ¦‚ðŸŸ«ðŸ”¬ðŸ‘§ðŸ«–ðŸ“ŸðŸ¼ðŸŸ¦ðŸ§‹ðŸðŸš³ðŸ†—ðŸ§©ðŸš¿ðŸ«‘ðŸšºðŸ¤­ðŸ¿ðŸšŽðŸ“ðŸ’¤ðŸ¤ðŸ¤ŽðŸ“„ðŸ‘œðŸœðŸŒ…ðŸ”ðŸ”ƒðŸ˜€ðŸ’˜ðŸ”ðŸš˜ðŸ•¶ðŸ•£ðŸš¼ðŸ’¾ðŸ¥§ðŸ“§â•ðŸ”¼ðŸ—„ðŸŒ¼ðŸªžâªðŸ•¢ðŸ“”ðŸ‘ºðŸ•’ðŸ‘¶ðŸ ðŸ’•ðŸ¥“ðŸŽ‰ðŸ¦™ðŸ›¤ðŸª˜ðŸ“¥ðŸ§ðŸ«ðŸ¦‘ðŸ¥ðŸ©´ðŸ”•ðŸŒ«ðŸ¥°ðŸ¦¾ðŸ“¼ðŸ¥¯â›¹ðŸ•ðŸ›³ðŸ•ŸðŸ¦¯ðŸ™€ðŸ“œðŸ¸ðŸ¤¥ðŸ’†ðŸ•“ðŸ”“ðŸ²ðŸ¥´ðŸ¬ðŸ›ƒðŸ§£ðŸ‘¦ðŸ¨ðŸª¨ðŸ˜±ðŸ›©ðŸ‘“ðŸ‘¹ðŸ©¹â›¸ðŸ›‹ðŸªœâ›´ðŸ¦ðŸ›ðŸš¾ðŸ¦šðŸ‘ŽðŸ§™ðŸ¥‰ðŸ¦›ðŸ§®ðŸ¤¤ðŸŽ´ðŸ•ŠðŸœðŸ§ªðŸ¤µðŸ“ðŸ’¯ðŸ¯ðŸš«ðŸ§¬ðŸ’®ðŸŸ£ðŸ›ðŸ˜‰ðŸ—¨ðŸ¦ºðŸ¤ðŸŽ†ðŸ˜ŠðŸ¤—ðŸš‘ðŸŒºðŸ¦ˆðŸ•”ðŸ˜¬ðŸ¦ðŸ—¾ðŸšªðŸ˜¥ðŸ«’ðŸ¦µðŸ˜·ðŸ¥­ðŸš½ðŸ”ŒðŸ˜ðŸŽ¤ðŸšðŸª‚ðŸ†˜ðŸºðŸ€ðŸ›¼ðŸ¦¤ðŸ’–ðŸ¦ðŸ•¸ðŸ†™â›‘ðŸ’´ðŸ™âŽðŸ¥»ðŸ•ðŸ¥¡ðŸš¢ðŸ‘½ðŸ˜‘ðŸ¥œðŸ”ºðŸ‰â¬›ðŸ¢ðŸ›ŽðŸ»ðŸ…±âŒ›ðŸ¥ºðŸšðŸ¯ðŸ§žðŸ”‹âš½ðŸ“€ðŸ‚ðŸªðŸ®ðŸª–ðŸªðŸ‘¿ðŸµðŸ¥™ðŸ’°ðŸ—ºðŸ§ºâž¿ðŸŒ“ðŸ—¡ðŸ§¾ðŸ«ðŸŒ±ðŸ“‰ðŸ‘™ðŸŒ•ðŸš¥ðŸ¤©ðŸ¨ðŸ¦“ðŸŒ§ðŸ¥¶ðŸ“†ðŸ®ðŸ§œðŸ—ðŸŒ ðŸ§ŸðŸš¯ðŸ¤™ðŸ­ðŸšðŸš•ðŸ¦¡ðŸ”²ðŸš²ðŸ“‚ðŸŒŸðŸ“µðŸ“»ðŸªµðŸ‘²ðŸŽ¢ðŸ§šðŸ”ŸðŸ‘©ðŸš»ðŸ˜ŽðŸ§ðŸ˜¨ðŸ“ðŸŽžðŸ˜¯â—ðŸ¥ŽðŸ„ðŸ¦¦ðŸ±ðŸŽƒðŸ–¼â›ŽðŸª”ðŸªƒðŸŒ°ðŸ—žðŸ†•ðŸ‘ðŸ¤’ðŸ’¼â“ðŸ¥¬ðŸ’ˆðŸ™ŠðŸ›—ðŸŽ„ðŸ“ºðŸ¥šðŸ“ðŸ¥¤ðŸ’¸ðŸ¤¼ðŸŒœâ­•ðŸ¤°ðŸ—¯ðŸ¸ðŸŽŠâ›©ðŸ§’ðŸ—œðŸ¦…ðŸ¤®ðŸ”‚ðŸ“ðŸ©³ðŸ˜ˆðŸ¥¿ðŸŽðŸš´ðŸ§¹ðŸ¥¢ðŸ¡ðŸŽ–ðŸ‘³ðŸ˜­â˜”ðŸ†“ðŸŽ™ðŸ“‘ðŸ‘ðŸ¦ªðŸ—ðŸ¥¨ðŸ®ðŸðŸ¥˜ðŸŒ‹ðŸ”†ðŸŒ¿ðŸ‘­ðŸš—ðŸ”œðŸŸðŸ‘ðŸš±ðŸ¢ðŸðŸŒ¶ðŸ–ŠðŸ¦¥ðŸƒðŸš’ðŸ¥€ðŸ–‡ðŸ–±ðŸ• ðŸ¥…ðŸ“¨ðŸžðŸ“…ðŸ—³ðŸ»ðŸ§¸ðŸ¦—ðŸ¥¾ðŸ™‰ðŸŒðŸ›¢ðŸ˜ðŸ˜ðŸŽ·ðŸ¦ŒðŸ˜£ðŸªðŸš¶ðŸŒ˜ðŸš­ðŸ’„ðŸ¥ðŸ¥•ðŸ˜ðŸ­ðŸ“’ðŸ’³ðŸ—“ðŸ¤“ðŸšžðŸ’‚ðŸ™ðŸ´ðŸ›ðŸ¦£ðŸ”·ðŸ™…ðŸ‘”ðŸ†ŽðŸ’ðŸŽ£ðŸŒðŸ‘ ðŸ˜ƒðŸŽ­ðŸ¤ðŸ“—ðŸ™ðŸ“ˆðŸ—¿ðŸ¤ªðŸðŸ«ðŸ†ðŸ‘ŠðŸ•¥ðŸ”¥ðŸ˜ŸðŸ†ðŸ¤¬ðŸª…ðŸ“½ðŸºâ›”ðŸŒ¾ðŸ¦”ðŸ’¢ðŸ¤¡ðŸŒ·ðŸŒ†ðŸ™ðŸ“ŒðŸ’‰ðŸ˜†ðŸ—ðŸ‘¾ðŸ–ðŸ©ðŸ‘ƒðŸ€„ðŸ¦´ðŸ§µðŸ—‚ðŸ›«ðŸ•¦ðŸšðŸ¦¸ðŸðŸ¥ƒðŸ†’ðŸ•â›ˆðŸŒ¯ðŸ§ ðŸ¤šðŸ›•ðŸ†”ðŸ§¡ðŸ‘¬ðŸ˜…ðŸ”™ðŸ¦žðŸŽˆðŸ§•ðŸ–ðŸ“¤ðŸ•™ðŸ˜´ðŸ’“â›²ðŸ›¥ðŸ¡ðŸ’£ðŸ•›ðŸŒ»ðŸŽ®ðŸŽ¹ðŸ˜‚ðŸ‘ðŸª¤ðŸ¦ðŸ›´ðŸ§€ðŸšŒðŸ”®ðŸ’ðŸ¥¸ðŸ¡ðŸšµðŸ‘â›·ðŸ›ðŸŒ›ðŸŠðŸ¹â®ðŸ›¹ðŸ”ŠðŸ“™ðŸŽðŸ‘¡ðŸ«“ðŸ‹ðŸðŸŽ³ðŸ‘®â¬ðŸ¦ƒðŸ‹ðŸ¾â›…ðŸª§ðŸ˜–ðŸ’ŠðŸ¥©ðŸ˜˜ðŸ‘°ðŸ¥ðŸ¢ðŸ†‘ðŸ“ŠðŸšðŸ‘‘ðŸ§´ðŸŒðŸŸ¢ðŸ§Šâ›½ðŸ‘‚ðŸ§½ðŸƒðŸ’¶ðŸ„ðŸ™ŽðŸ‘žâ¹ðŸ› ðŸ§ðŸ«ðŸ”ðŸ‘•â³ðŸŽ©ðŸ â­ðŸ¥²ðŸ˜µðŸ’¹ðŸ•µðŸš·ðŸ“«ðŸ““ðŸª¢ðŸ¥žðŸ©ºðŸ§›ðŸ™ŒðŸ”­ðŸš„ðŸ™ðŸ“›ðŸ•·ðŸ˜¢ðŸ”ðŸŽ“ðŸ’šðŸ’žðŸ˜¦ðŸ§ðŸ”ðŸ˜½â›µðŸ²ðŸ—’ðŸŽŽðŸ“ðŸ’€ðŸ‘€ðŸ“ðŸ“ ðŸ¦§ðŸŽ«ðŸ¥ðŸ”’ðŸ˜§ðŸ—¼ðŸ‘¼ðŸŒ³ðŸ˜ðŸ“¶ðŸ—ƒðŸ„ðŸ’›ðŸ˜‡ðŸ›¡ðŸ™‡ðŸŒ„ðŸ§»ðŸ˜²ðŸ˜—ðŸš¤ðŸŒ¬ðŸ‘·ðŸ§ðŸ¤ŸðŸ•¯ðŸŽ‚â²ðŸ¥‚ðŸ’™ðŸ§°ðŸ¼ðŸŒŒðŸ“ƒðŸ’µðŸ˜®ðŸ”ðŸ‘´ðŸ·ðŸŒ¨âž•ðŸ¤˜ðŸ¬ðŸ›–ðŸ‘…ðŸ«”ðŸŒ‚ðŸ¦¼ðŸ§‚ðŸâ˜•ðŸ©±ðŸ§ˆðŸ¥„ðŸ”ªâ—¾ðŸš‡ðŸ¥”ðŸ“±ðŸ¦ðŸ•–ðŸ¥‹ðŸ’ºðŸ¥ðŸ“¦ðŸ¤¨ðŸ•ðŸ’­ðŸ’‘ðŸžðŸŒ–â©ðŸ½ðŸŸ ðŸ¥›ðŸ°ðŸ”€ðŸƒðŸ“·ðŸ—»ðŸ¤¢ðŸ˜•ðŸ‡ðŸ”¸ðŸª•ðŸ‹ðŸ¦·ðŸ«ðŸ‘ðŸŒ”ðŸ””ðŸŽµðŸ‘„ðŸðŸ¦¿ðŸŽ²ðŸ”…ðŸ³ðŸšŸðŸ˜ ðŸŒ®ðŸ––ðŸ¤›ðŸ…¿â›ºðŸŒ©ðŸŽ¬ðŸ³ðŸ˜ðŸ€ðŸ˜œðŸ™ˆðŸ“­ðŸ«•ðŸŽºðŸ“žðŸ§…ðŸ–ŒðŸª€ðŸŽ‘ðŸŒ¹ðŸŒžðŸ’œðŸŒˆðŸª‘ðŸ™ƒðŸ˜‹ðŸ–¥ðŸ˜¼ðŸª›ðŸ™ðŸ’ðŸš–ðŸ¥µðŸ¤”ðŸ™„ðŸ¤œðŸŽ»ðŸŒƒðŸ¶ðŸ¥ðŸŽ§ðŸ¤¯ðŸ”‘ðŸ–¤ðŸ›µðŸ˜¸ðŸ“¹ðŸš¸ðŸ›’ðŸ¥ªðŸŽ›ðŸŒðŸˆðŸ–ðŸ€ðŸ¤•ðŸŽ¸ðŸ§ðŸŽ¶ðŸ§ðŸ¦•ðŸ§‡ðŸ’’ðŸŽ’ðŸ•´ðŸ¤¸ðŸ³ðŸ˜™ðŸ§‰ðŸª³`)

var (
	shamoji256 = encoding{emoji, 32}
	shamoji1   = encoding{emoji, 20}
)

func main() {
	if len(os.Args) > 1 { // there's an arg
		switch os.Args[1] {
		case "-r", "--replace":
			replace()
			return
		}
	}

	in, err := ioutil.ReadAll(os.Stdin)
	if err != nil {
		fmt.Println(err)
		return
	}

	hash := sha256.Sum256(in)

	fmt.Println(shamoji256.Encode(hash[:]))
}

func replace() {
	in := bufio.NewScanner(os.Stdin)
	in.Split(bufio.ScanRunes)

	currWord := ""
	//spaceToPrint := ""
	for in.Scan() {
		d := in.Bytes()
		r, _ := utf8.DecodeRune(d)
		if unicode.IsSpace(r) {
			fmt.Print(currWord + string(d))
			currWord = ""
			//spaceToPrint += string(d)
		} else {
			currWord += string(r)
		}
		// check if the word is a hex encoded hash
		if len(currWord) == 64 || len(currWord) == 40 {
			d, err := hex.DecodeString(currWord)
			if err == nil {
				if len(currWord) == 64 {
					fmt.Print(shamoji256.Encode(d))
				} else {
					fmt.Print(shamoji1.Encode(d))
				}
				//fmt.Print(shamoji.Encode(d))
				currWord = ""
			}
		}
	}
}

type encoding struct {
	set []rune
	// dataLen is the length of the byte data used. In duckcoin, this is always 24.
	dataLen int
}

func (e *encoding) Encode(data []byte) string {
	convertedBase := toBase(new(big.Int).SetBytes(data), "", e.set)
	// repeat emoji[0] is to normalize result length. 0 because that char has zero value in the set
	return strings.Repeat(string(e.set[0]), e.EncodedLen()-len([]rune(convertedBase))) + convertedBase
}

func (e *encoding) Decode(data string) ([]byte, error) {
	if len([]rune(data)) != e.EncodedLen() {
		return nil, errors.New("could not decode: invalid length of data: " + data)
	}
	num, err := fromBase(data, e.set)
	if err != nil {
		return nil, err
	}
	return num.FillBytes(make([]byte, e.dataLen)), nil
}

func (e *encoding) EncodedLen() int {
	return int(math.Ceil(
		float64(e.dataLen) * math.Log2(256) / math.Log2(float64(len(e.set))),
	))
}

func toBase(num *big.Int, buf string, set []rune) string {
	base := int64(len(set))
	div, rem := new(big.Int), new(big.Int)
	div.QuoRem(num, big.NewInt(base), rem)
	if div.Cmp(big.NewInt(0)) != 0 {
		buf += toBase(div, buf, set)
	}
	return buf + string(set[rem.Uint64()])
}

func fromBase(enc string, set []rune) (*big.Int, error) {
	result := new(big.Int)
	setlen := len(set)
	encRune := []rune(enc)
	numOfDigits := len(encRune)
	for i := 0; i < numOfDigits; i++ {
		mult := new(big.Int).Exp( // setlen ^ numOfDigits-i-1 = the "place value"
			big.NewInt(int64(setlen)),
			big.NewInt(int64(numOfDigits-i-1)),
			nil,
		)
		idx := findRuneIndex(encRune[i], set)
		if idx == -1 {
			return nil, errors.New("could not decode " + enc + ": rune " + string(encRune[i]) + " is not in charset")
		}
		mult.Mul(mult, big.NewInt(idx)) // multiply "place value" with the digit at spot i
		result.Add(result, mult)
	}
	return result, nil
}

// findRuneIndex returns the index of rune r in slice a, or -1 if not found
func findRuneIndex(r rune, a []rune) int64 {
	for i := range a {
		if a[i] == r {
			return int64(i)
		}
	}
	return -1
}
